---
layout: default
---

{% if page.tag_filter %}
  {% assign page_title = page.tag_filter %}
  {% assign filtered_posts = site.tags[page.tag_filter] %}
{% else %}
  {% assign page_title = page.title %}
  {% assign filtered_posts = site.posts %}
{% endif %}

{% assign posts = filtered_posts | where: "language", page.language | sort: 'update' | reverse %}

<div class="blog list">
  <div class="row" >
    <div class="col-xs-10 col-xs-offset-2">
      <h1>{% include fn_getcatname cat=page_title %}</h1>
    </div>
  </div>

  <div class="row" >
    <div class="col-xs-2">
      {% assign site_tags = '' | split: '*' %}
      {% if page.hide_tags_with_no_posts %}
      {% assign posts_with_tags = posts %}
      {% else %}
      {% assign posts_with_tags = site.posts %}
      {% endif %}
      {% for post in posts_with_tags %}
        {% for post_tag in post.tags %}
          {% unless site_tags contains post_tag %}
            {% assign site_tags = site_tags | push: post_tag %}
          {% endunless %}
        {% endfor %}
      {% endfor %}

      <ul class="nav nav-pills nav-stacked">
        <li role="presentation" {% if page.url == "/topics/covid19/" %}class="active"{% endif %}><a href="/topics/covid19" >All Covid19</a></li>
        {% for tag in site_tags %}
        <li role="presentation" {% if tag == page.tag_filter %}class="active"{% endif %}><a href="/topics/covid19/{{tag}}">{% include fn_getcatname cat=tag %}</a></li>
        {% endfor %}
        <li role="presentation" {% if page.url == "/visualisations" %}class="active"{% endif %}><a href="/visualisations" >Apps</a></li>
      </ul>
    </div>
    <div class="col-xs-10" >
      {{content}}

      {% if posts.size > 0 %}
        <div class="posts">
          {% include posts_filter.html posts=posts %}

          {% for post in posts %}

            {% if post.status %}
              {% assign post_status = post.status %}
            {% else %}
              {% assign post_status = 'in-progress' %}
            {% endif %}
            <article class="status_{{post_status}} {%for post_cat in post.categories%}category_{{post_cat}} {%endfor%}">
              <header>
                <dl class="meta-information">
                  <dt>Type</dt>
                  <dd class="status {{post.status}}">{% include fn_gettranslation string=post_status lang=page.language %}</dd>
                </dl>
                <div class="title-and-dates" >
                  <h4><a href="{{post.url}}">{{post.title}}</a></h4>
                  <dl class="publishing-dates">
                    <dt>{% include fn_gettranslation string='First online' lang=page.language %}</dt>
                    <dd>{{post.date | date: "%d-%m-%Y"}}</dd>
                    {% if post.update %}
                      <dt>{% include fn_gettranslation string="Last update" lang=page.language %}</dt>
                      <dd>{{post.update | date: "%d-%m-%Y"}}</dd>
                    {% endif %}
                  </dl>
                </div>
              </header>
              <div class="content">
                <p>{{post.description}}</p>
                <p class="read-more"><a href="{{post.url}}">{% include fn_gettranslation string="Read more" lang=page.language %}</a></p>
              </div>
            </article>
          {% endfor %}

          <div class="no-articles" style="display:none;">{% include fn_gettranslation string="No articles match the current filter" lang=page.language %}.</div>
        </div>
      {% else %}
        <p>{% include fn_gettranslation string="We haven't published any work on this topic yet" lang=page.language %}.</p>
      {% endif %}
    </div>
  </div>
</div>
